PCM.Search = (function() {
  function performSearch(event) {
    var zipCode = $('#climate_map_zip_code').val();

    $.ajax('<%= ENV['SITE_URL'] %>/zip_codes/' + zipCode, {
      success: function(data) {
        $('#events_near_you ul').empty();
        $('#events_near_you a').show();
        $('#events_near_you').show();
        PCM.Map.setView(data['latitude'], data['longitude']);
        $('#climate_map_search_error').hide();
      },
      error: function() {
        $('#climate_map_search_error').show();
      }
    });
    event.preventDefault();
  }

  return {
    performSearch: performSearch
  }
})();
